# 이진 검색 (Binary Search)

이진 검색을 사용하기 위해선 배열이 정렬되어 있어야 한다. 이진 검색은 선형 검색보다 빠르게 검색할 수 있다는 장점이 있다.

## 이진 검색

오름차순이나 내림차순으로 정렬된 배열에서 좀 더 효율적으로 검색을 수행할 수 있는 알고리즘이다.

```python
arr = [1, 5, 7, 10, 12, 30, 36, 41]
```

5를 찾는 과정

1. 배열의 중앙 인덱스의 값 arr[3] 10에 주목한다.
2. 찾아야 할 5는 10보다 앞에 위치하므로 검색 범위를 0 ~ 2로 줄일 수 있다.
3. 검색 범위(0 ~ 2)에서 중앙값 arr[1]의 5에 주목한다. 찾는 값이므로 검색을 종료한다.

오름차순으로 정렬된 배열에서 검색 범위의 맨 앞, 맨 끝, 중앙의 인덱스를 각각 pl, pr, pc라 하자, 초기값은 pl = 0, pr = n - 1, pc = (n - 1) // 2 이다. 검색을 한 번 수행할 때마다 검색 범위는 거의 반으로 줄어든다. 또한 데이터를 순차적으로 비교하는 선형 검색과 달리 이진 검색에서는 주목할 원소를 검색 범위의 중앙 값으로 한 번에 이동한다.

배열의 pc에 해당하는 값이 원하는 값과 다른 경우 검색 범위를 좁히는 과정을 알아보자

**arr[pc] < key 일 때**

원소가 오름차순으로 정렬되어 있기 때문에 arr[pc]가 key보다 작다면 pc 이전 인덱스의 값도 모두 key 보다 작기 때문에 pc부터 그 이전의 인덱스에서는 검색을 수행할 필요가 없다. 따라서 검색의 시작 점 pl의 값을 pc + 1로 업데이트한다.

**arr[pc] > key 일 때**

pc 이후 인덱스에 해당하는 값은 모두 key 보다 큰 값이다. 따라서 pc부터 그 이후 인덱스에서는 검색 할 필요가 없다. 검색의 끝 점 pr을 pc - 1로 업데이트 한다.

> - arr[pc] < key: 중앙에서 오른쪽으로 한 칸 이동하여 검색의 시작점을 지정하고 검색 범위를 뒤쪽 절반으로 좁힌다.
> - arr[pc] > key: 중앙에서 왼쪽으로 한 칸 이동하여 검색의 끝 점을 지정하고 검색 범위를 앞쪽 절반으로 좁힌다.

이진 검색의 종결 조건은 다음 두 가지로 나타낼 수 있다.

> 1. arr[pc]가 key와 일치하는 경우
> 2. 검색 범위가 더 이상 없는 경우

검색에 실패하는 과정을 살펴보자

```python
arr = [3, 7, 9, 10, 12, 16, 21, 27, 31, 34]
```

위 배열 arr에서 6을 찾는 과정을 살펴보면

1. 배열의 중앙값 arr[4] 12에 주목한다. 12는 6보다 크기 때문에 검색 범위를 pc - 1 (3)까지 좁힌다.
2. 중앙값 arr[1] 7에 주목한다. 7은 6보다 크므로 검색 범위를 pc - 1 (0)으로 좁힌다. pl과 pr 둘 다 0이 되었다.
3. arr[0] 3에 주목한다. 3은 6보다 작으므로 검색의 시작 점 pl을 pc + 1(1)로 만든다.
4. 검색 범위 1 ~ 0은 유효하지 않기 때문에 검색을 종료한다. 검색에 실패하였다.

***

## 코드로 구현하기

```python
def binary_search(data, key):
    pl = 0
    pr = len(data) - 1

    while True:
        pc = (pl + pr) // 2

        if data[pc] == key:
            return pc
        elif data[pc] < key:
            pl = pc + 1
        else:
            pr = pc - 1

        if pl > pr:
            return -1
```
